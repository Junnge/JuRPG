<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>JuRPG</title>
	<meta charset="utf-8" />
	<link type="text/css" rel="stylesheet" href="style.css" /> 
	<link type="text/css" rel="stylesheet" href="reset.css" /> 
</head>
<body>
<div id="main_box">
	<div id="enemy_status">
		<p id="enemy_name">Имя: </p>
		<p id="health_bar_enemy">Здоровье: </p>
	</div>
	<div id="hero_status">
		<p id="health_bar_hero">Здоровье: </p>
		<p id="exp_bar">Опыт:</p>
	</div>
	<div id="content_box">
		<div id="nav_buttons">
			<button id="text_button" onclick="show_text_box()">Инфо</button><br>
			<button id="map_button" onclick="show_map_box()">Карта</button><br>
			<button id="status_button" onclick="show_status_box()">Статус</button><br>
		</div>
		<div id="action_buttons">
			<button id="hunt_button" onclick="hunt()">Охота</button>
			<button id="search_button" onclick="">Поиск</button>
			<button id="adv_button" onclick="adventure()">Путешествие</button>
			<button id="fight_button" onclick="fight()">Атака</button>
		</div>
		<div id="text_box">		
		</div>
		<div id="map_box">
		</div>
		<div id="status_box">
		</div>		
	</div>
</div>
<script type="text/javascript">
	function randomInt(min, max) {
    	var rand = min - 0.5 + Math.random() * (max - min + 1)
    	rand = Math.round(rand);
    	return rand;
  	}
  	var xp=0;
  	var forage_cd=0;

  	var arrEnemies = []; //Массив монстров
  	arrEnemies[0] = {
  		name : "Койот",
  		hp : 25,
  		dmg : 1,
  		exp : 3
  	}
  	arrEnemies[1] = {
  		name : "Скорпион",
  		hp : 35,
  		dmg : 2,
  		exp : 5
  	}

  	var enemyObject = new Object();

	function hunt(argument) {
		if (forage_cd==0) {
			xp++;
			document.getElementById('text_box').innerHTML += "<p>Вы поймали "+randomInt(2, 4)+" ящерицы и получили 1XP</p>";
			document.getElementById('exp_bar').innerHTML = "Опыт: " + xp;
			forage_cd = 1;
			setTimeout(function(){forage_cd=0;}, 10000);
		} else document.getElementById('text_box').innerHTML += "<p>Вы устали!</p>";
		document.getElementById('text_box').scrollTop = 9999;
	}
	function adventure(){
		var id = randomInt(0, 1);
		enemyObject["name"] = arrEnemies[id].name;
		enemyObject["hp"] = arrEnemies[id].hp;
		enemyObject["dmg"] = arrEnemies[id].dmg;
		enemyObject["exp"] = arrEnemies[id].exp;
		document.getElementById('text_box').innerHTML += "<p>Вы встретили "+enemyObject.name+"</p>";
		document.getElementById('health_bar_enemy').innerHTML = "Здоровье: "+enemyObject.hp;
		document.getElementById('enemy_name').innerHTML = "Имя: "+enemyObject.name;
	}
	function fight(){
		if(enemyObject.hp > 0){
			var damage = 1 + randomInt(1, 6);
			enemyObject.hp -= damage;
			if (enemyObject.hp<0) {enemyObject.hp=0;}
			document.getElementById('text_box').innerHTML += "<p>Вы нанесли ["+enemyObject.name+"] "+damage+" урона</p>";
			document.getElementById('health_bar_enemy').innerHTML = "Здоровье: "+enemyObject.hp;
			document.getElementById('enemy_name').innerHTML = "Имя: "+enemyObject.name;
		}
	}
	function show_text_box(argument) {
		document.getElementById('text_box').style = "visibility: visible;"
		document.getElementById('map_box').style = "visibility: hidden;"
		document.getElementById('status_box').style = "visibility: hidden;"
		document.getElementById('action_buttons').style = "visibility: visible;"
	}
	function show_status_box(argument) {
		document.getElementById('text_box').style = "visibility: hidden;"
		document.getElementById('map_box').style = "visibility: hidden;"
		document.getElementById('status_box').style = "visibility: visible;"
		document.getElementById('action_buttons').style = "visibility: hidden;"
	}
	function show_map_box(argument) {
		document.getElementById('text_box').style = "visibility: hidden;"
		document.getElementById('map_box').style = "visibility: visible;"
		document.getElementById('status_box').style = "visibility: hidden;"	
		document.getElementById('action_buttons').style = "visibility: hidden;"
	}
</script>
</body>
</html>
